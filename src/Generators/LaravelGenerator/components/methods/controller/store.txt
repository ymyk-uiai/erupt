<template>

<!erupt
    model = self.files.model.className
    modelFullClass = self.files.model.fullClassName
    modelInstance = self.files.model.instance
    collection = self.files.collection.className
    collectionInstance = self.files.collection.instance
    resourceInstance = self.files.resource.instance
    resourceClass = self.files.resource.className
    storeRequestClass = self.files.request@store.fullClassName
!>

<!erupt
    print("public function store({} $request)", storeRequestClass)
!>
{
    <!erupt
        print("$this->authorize('create', {})", modelFullClass)
    !>

    $validated = $request->validated();

    $<!erupt resoureInstance !> = new <!erupt resourceClass !>([
        'title' => $validated['title'],
    ]);

    <!erupt
        print("$request->user()->{}()->save({})", collectionInstance, modelInstace)
    !>
    
    <!erupt
        print("return new {}({})", resourceClass, resourceInstance)
    !>
}
</template>

<data>
{
    "name": "controller_store",
    "type": "php_class",
    "components": [],
    "use": []
}
</data>